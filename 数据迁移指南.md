# Bee Store 数据迁移指南

## 🚨 重要问题
学生提交的作品数据存储在Ashlynn的JSONBin账号中，您的新站点无法直接访问这些数据。

## 📋 数据迁移方案

### 方案A：请求数据导出（推荐）

#### 1. 联系Ashlynn
请Ashlynn帮助导出数据：
- 访问原站点的管理员界面
- 使用"数据快照"或"导出"功能
- 下载完整的数据文件

#### 2. 数据格式
导出的数据应包含：
```json
{
  "users": [
    {
      "id": "user_id",
      "username": "用户名", 
      "email": "邮箱",
      "createdAt": "创建时间"
    }
  ],
  "apps": [
    {
      "id": "app_id",
      "name": "作品名称",
      "url": "作品链接", 
      "description": "描述",
      "category": "分类",
      "author": "作者",
      "screenshot": "截图URL",
      "createdAt": "创建时间",
      "likes": [],
      "favorites": [],
      "comments": []
    }
  ]
}
```

### 方案B：手动获取数据

如果您仍有原站点的管理员权限：

#### 1. 访问原站点
- 打开原站点URL
- 登录管理员账号

#### 2. 通过浏览器获取数据
```javascript
// 在原站点的浏览器控制台中执行
// 获取本地存储的数据
const localData = localStorage.getItem('beestoreLocalBackup');
if (localData) {
    const data = JSON.parse(localData);
    console.log('本地数据:', data);
    
    // 下载数据文件
    const blob = new Blob([JSON.stringify(data.data, null, 2)], 
        {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'bee-store-data-backup.json';
    a.click();
}
```

#### 3. 获取云端数据（如果有权限）
```javascript
// 如果原站点可以访问云端数据
fetch('/.netlify/functions/jsonbin-proxy')
  .then(response => response.json())
  .then(data => {
    console.log('云端数据:', data);
    
    // 下载云端数据
    const blob = new Blob([JSON.stringify(data.record, null, 2)], 
        {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'bee-store-cloud-backup.json';
    a.click();
  })
  .catch(error => console.error('获取云端数据失败:', error));
```

### 方案C：配置您自己的API密钥

#### 1. 注册新的服务账号
- [JSONBin.io](https://jsonbin.io) - 创建您的账号
- [ImgBB](https://imgbb.com/api) - 创建API密钥
- [Screenshot API](https://screenshotapi.net) - 创建Token

#### 2. 在本地测试
创建 `.env` 文件：
```bash
JSONBIN_BIN_ID=your_new_bin_id
JSONBIN_API_KEY=your_new_api_key
IMGBB_API_KEY=your_new_imgbb_key
SCREENSHOT_API_TOKEN=your_new_screenshot_token
```

#### 3. 重启本地服务器
```bash
# 停止当前服务器
pkill -f "netlify dev"

# 重新启动
netlify dev
```

## 📥 导入数据到新站点

### 1. 准备数据文件
确保数据文件格式正确，包含 `users` 和 `apps` 数组。

### 2. 通过管理员界面导入
- 访问您的新站点
- 登录管理员账号
- 使用"数据快照"功能导入数据

### 3. 手动导入（开发者方式）
在新站点的浏览器控制台中：
```javascript
// 假设您有导出的数据
const importedData = {
  users: [...], // 导入的用户数据
  apps: [...]   // 导入的作品数据
};

// 清空现有数据并导入新数据
localStorage.setItem('beestoreLocalBackup', JSON.stringify({
  data: importedData,
  timestamp: new Date().toISOString(),
  version: '1.0'
}));

// 刷新页面
location.reload();
```

## ⚠️ 注意事项

### 数据完整性
- 确保导入的数据包含所有必要字段
- 检查用户ID和作品ID的唯一性
- 验证日期格式和数据类型

### 隐私和安全
- 获取数据前确保有适当的权限
- 不要泄露API密钥和敏感信息
- 确保学生数据的隐私保护

### 功能测试
导入数据后测试：
- [ ] 用户登录功能
- [ ] 作品显示和搜索
- [ ] 点赞、收藏、评论功能
- [ ] 数据同步功能

## 🆘 需要帮助？

如果在数据迁移过程中遇到问题：
1. 检查数据文件格式
2. 验证API密钥配置
3. 查看浏览器控制台错误
4. 联系Ashlynn获取技术支持

---

**建议：优先选择方案A，请Ashlynn协助导出数据，这是最安全和完整的方式。** 